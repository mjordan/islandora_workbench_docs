
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for Islandora Workbench">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Exporting Islandora 7 content - Islandora Workbench</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Islandora Workbench" class="md-header__button md-logo" aria-label="Islandora Workbench" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Islandora Workbench
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Exporting Islandora 7 content
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/mjordan/islandora_workbench_docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Islandora Workbench" class="md-nav__button md-logo" aria-label="Islandora Workbench" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Islandora Workbench
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mjordan/islandora_workbench_docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../drupal_and_workbench/" class="md-nav__link">
        Workbench's relationship to Drupal and Islandora
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Requirements and installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../check/" class="md-nav__link">
        Checking configuration and input data
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../preparing_data/" class="md-nav__link">
        Preparing your data
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../fields/" class="md-nav__link">
        Field data (Drupal and CSV)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ignoring_csv_rows_and_columns/" class="md-nav__link">
        Ignoring CSV rows and columns
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../field_templates/" class="md-nav__link">
        CSV field templates
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../csv_value_templates/" class="md-nav__link">
        CSV value templates
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../paged_and_compound/" class="md-nav__link">
        Creating paged, compound, and collection content
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../nodes_only/" class="md-nav__link">
        Creating nodes without media
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../creating_nodes_from_files/" class="md-nav__link">
        Creating nodes from files
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../creating_taxonomy_terms/" class="md-nav__link">
        Creating taxonomy terms
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../aliases/" class="md-nav__link">
        Assigning URL aliases
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../alt_text/" class="md-nav__link">
        Adding alt text to images
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../rolling_back/" class="md-nav__link">
        Rolling back nodes and media
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../media_types/" class="md-nav__link">
        Configuring media types
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../updating_nodes/" class="md-nav__link">
        Updating nodes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../deleting_nodes/" class="md-nav__link">
        Deleting nodes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../quick_delete/" class="md-nav__link">
        Quick delete
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../adding_media/" class="md-nav__link">
        Adding media to nodes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../adding_multiple_media/" class="md-nav__link">
        Adding multiple media
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../media_track_files/" class="md-nav__link">
        Creating media track files
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../deleting_media/" class="md-nav__link">
        Deleting media
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../generating_csv_files/" class="md-nav__link">
        Generating CSV files
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Exporting Islandora 7 content
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Exporting Islandora 7 content
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analyzing-your-islandora-7-solr-index" class="md-nav__link">
    Analyzing your Islandora 7 Solr index
  </a>
  
    <nav class="md-nav" aria-label="Analyzing your Islandora 7 Solr index">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-islandora-metadata-extras-module" class="md-nav__link">
    Using the Islandora Metadata Extras module
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetching-sample-solr-documents" class="md-nav__link">
    Fetching sample Solr documents
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetching-a-csv-list-of-all-solr-fieldnames" class="md-nav__link">
    Fetching a CSV list of all Solr fieldnames
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-which-solr-fields-to-include-in-the-csv" class="md-nav__link">
    Configuring which Solr fields to include in the CSV
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-filters-to-your-solr-query-to-limit-the-objects-fetched-from-the-source-islandora" class="md-nav__link">
    Adding filters to your Solr query to limit the objects fetched from the source Islandora
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#putting-your-solr-request-in-a-file" class="md-nav__link">
    Putting your Solr request in a file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-csv-as-input-for-workbench" class="md-nav__link">
    Using the CSV as input for Workbench
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../hooks/" class="md-nav__link">
        Hooks
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../fixity/" class="md-nav__link">
        Fixity checking
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../logging/" class="md-nav__link">
        Logging
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../cancelling/" class="md-nav__link">
        Cancelling Workbench
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../workflows/" class="md-nav__link">
        Workflows
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../contact_sheet/" class="md-nav__link">
        Generating a contact sheet
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../reducing_load/" class="md-nav__link">
        Reducing Workbench's impact on Drupal
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../sample_data/" class="md-nav__link">
        Creating nodes from the sample data
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../generating_sample_content/" class="md-nav__link">
        Generating sample Islandora content
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../limitations/" class="md-nav__link">
        Known limitations
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../roadmap/" class="md-nav__link">
        Roadmap (Fall 2021)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        Change log
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../development_guide/" class="md-nav__link">
        Development guide
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analyzing-your-islandora-7-solr-index" class="md-nav__link">
    Analyzing your Islandora 7 Solr index
  </a>
  
    <nav class="md-nav" aria-label="Analyzing your Islandora 7 Solr index">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-islandora-metadata-extras-module" class="md-nav__link">
    Using the Islandora Metadata Extras module
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetching-sample-solr-documents" class="md-nav__link">
    Fetching sample Solr documents
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetching-a-csv-list-of-all-solr-fieldnames" class="md-nav__link">
    Fetching a CSV list of all Solr fieldnames
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-which-solr-fields-to-include-in-the-csv" class="md-nav__link">
    Configuring which Solr fields to include in the CSV
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-filters-to-your-solr-query-to-limit-the-objects-fetched-from-the-source-islandora" class="md-nav__link">
    Adding filters to your Solr query to limit the objects fetched from the source Islandora
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#putting-your-solr-request-in-a-file" class="md-nav__link">
    Putting your Solr request in a file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-csv-as-input-for-workbench" class="md-nav__link">
    Using the CSV as input for Workbench
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/mjordan/islandora_workbench_docs/edit/main/docs/exporting_islandora_7_content.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


  <h1>Exporting Islandora 7 content</h1>

<h2 id="overview">Overview</h2>
<p>Islandora Workbench's main purpose is to load batches of content into an Islandora 2 repository. However, loading
content can also be the last step in migrating from Islandora 7 to Islandora 2. As noted in
the "<a href="/islandora_workbench_docs/workflows/#migrations">Workflows</a>" documentation, Workbench can be used in the "load"
phase of a typical <a href="https://en.wikipedia.org/wiki/Extract,_transform,_load">extract, transform, load</a> (ETL) process.</p>
<p>Workbench comes with a standalone script, <code>get_islandora_7_content.py</code>, that can be used to extract (a.k.a. "export")
metadata and OBJ datastreams from an Islandora 7 instance. This data can form the basis for Workbench input data.</p>
<p>To run the script, change into the Workbench "i7Import" directory and run:</p>
<p><code>python3 get_islandora_7_content.py --config &lt;my_config&gt;</code></p>
<p>The script uses a number of configuration variables, all of which come with sensible defaults. Any of the following
parameters can be changed in the user-supplied config file.</p>
<table>
    <thead>
    <tr>
        <th>Parameter</th>
        <th>Default Value</th>
        <th>Description</th>
    </tr>
    </thead>
    <tr>
        <td>solr_base_url</td>
        <td>http://localhost:8080/solr</td>
        <td>URL of your source Islandora 7.x Solr instance.</td>
    </tr>
    <tr>
        <td>islandora_base_url</td>
        <td>http://localhost:8000</td>
        <td>URL of your source Islandora instance.</td>
    </tr>
    <tr>
        <td>csv_output_path</td>
        <td>islandora7_metadata.csv</td>
        <td>Path to the CSV file containing values from Solr.</td>
    </tr>
    <tr>
        <td>obj_directory</td>
        <td>/tmp/objs</td>
        <td>Path to the directory where datastream files will be saved.</td>
    </tr>
    <tr>
        <td>log_file_path</td>
        <td>islandora_content.log</td>
        <td>Path to the log file.</td>
    </tr>
    <tr>
        <td>fetch_files</td>
        <td>true</td>
        <td>Whether or not to fetch and save the datastream files from the source Islandora 7.x instance.</td>
    </tr>
    <tr>
        <td>get_file_uri</td>
        <td>false</td>
        <td>Whether or not to write datastream file URLs to the CSV file instead of fetching the files. One of `get_file_uri` or `fetch_files` can be set  to `true`, but not both.</td>
    </tr>
    <tr>
        <td>field_pattern</td>
        <td>mods_.*(_s|_ms)$</td>
        <td>A regular expression pattern to matching Solr fields to include in the CSV. </td>
    </tr>
    <tr>
        <td>field_pattern_do_not_want</td>
        <td>(marcrelator|isSequenceNumberOf)</td>
        <td>A regular expression pattern to matching Solr fields to not include in the CSV. </td>
    </tr>
    <tr>
        <td>standard_fields</td>
        <td>['PID', 'RELS_EXT_hasModel_uri_s', 'RELS_EXT_isMemberOfCollection_uri_ms',
            'RELS_EXT_isMemberOf_uri_ms', 'RELS_EXT_isConstituentOf_uri_ms',
            'RELS_EXT_isPageOf_uri_ms']
        </td>
        <td>List of fields to Solr fields to include in the CSV not matched by the regular expression in `field_pattern`.</td>
    </tr>
    <tr>
        <td>id_field</td>
        <td>PID</td>
        <td>The Solr field that uniquely identifies each object in the source Islandora 7.x instance.</td>
    </tr>
    <tr>
        <td>id_start_number</td>
        <td>1</td>
        <td>The number to use as the first Workbench ID within the CSV file.</td>
    </tr>
    <tr>
        <td>datastreams</td>
        <td>['OBJ', 'PDF']</td>
        <td>List of datastream IDs to fetch from the source Islandora 7.x instance.</td>
    </tr>
    <tr>
        <td>namespace</td>
        <td>*</td>
        <td>The namespace of objects you want to export from the source Islandora 7.x instance.</td>
    </tr>
    <tr>
        <td>collection</td>
        <td></td>
        <td>PID of a single collection limiting the objects to fetch from the source Islandora 7.x instance. Only matches objects that have the specified collection as their immediate parent. For recursive collection membership, add `tors_ms` as a `solr_filter`, as documented below. Note: the colon in the collection PID must be escaped with a backslash (`\`), e.g., `cartoons\:collection`.</td>
    </tr>
    <tr>
        <td>content_model</td>
        <td></td>
        <td>PID of a single content model limiting the objects to fetch from the source Islandora 7.x instance. Note: the colon in the content model PID must be escaped with a backslash (`\`), e.g., `islandora\:sp_large_image_cmodel`.</td>
    </tr>
    <tr>
        <td>solr_filters</td>
        <td></td>
        <td>key:value pairs to add as filters to the Solr query. See examples below.</td>
    </tr>
    <tr>
        <td>debug</td>
        <td>False</td>
        <td>Print debug information to the console.</td>
    </tr>
    <tr>
        <td>deep_debug</td>
        <td>False</td>
        <td>Print additional debug information to the console.</td>
    </tr>
</table>

<h2 id="analyzing-your-islandora-7-solr-index">Analyzing your Islandora 7 Solr index</h2>
<p>In order to use the configuration options outlined above, you will need to know what fields are in your Islandora 7 Solr index. Not all Islandoras are indexed in the same way, and since most Solr field names are derived from MODS or other XML datastream element names, there is enough variability in Solr fieldnames across Islandora 7 instances to make reliably predicting Solr fieldnames impractical.</p>
<p>Two ways you can see the specific fields in your Solr index are 1) using the Islandora Metadata Extras module, and 2) issuing raw requests to your Islandora 7's Solr, both to get Solr content for sample objects and to get a list of all fields in your index.</p>
<h3 id="using-the-islandora-metadata-extras-module">Using the Islandora Metadata Extras module</h3>
<p>The <a href="https://github.com/bondjimbond/islandora_metadata_extras">Islandora Metadata Extras module</a> provides a "Solr Metadata" tab in each object's Manage menu that shows the raw Solr document for the object. The Solr field names and the values for the current object are easy to identify. Here are two screenshots showing the top section of the output and a sample from the middle of the output (broken into top and middle excerpts for illustration purposes here since the entire Solr document is very long):</p>
<p>Top:</p>
<p><img alt="Example Solr Document top" src="../images/metadata_extras_solr_metadata_top.png" /></p>
<p>Middle:</p>
<p><img alt="Example Solr Document middle" src="../images/metadata_extras_solr_metadata_middle.png" /></p>
<h3 id="fetching-sample-solr-documents">Fetching sample Solr documents</h3>
<p>If you can't or don't want to install the Islandora Metadata Extras module, you can query Solr directly to get a sample document. To get the entire Solr document for an object in JSON format, issue the following request to your Solr, replacing <code>km\:10571</code> with the PID of your object. The <code>-o</code>  option in the <code>curl</code> command (for "output") tells <code>curl</code> to save the response to the named file:</p>
<p><code>curl -o km_10571.json "http://localhost:8080/solr/select?q=PID:km\:10571&amp;wt=json"</code></p>
<p>The resulting file will look like <a href="/islandora_workbench_docs/km_10571.json">this</a>.</p>
<p>Get Solr XML document for a specific object:</p>
<p><code>curl -o km_10571.xml "http://localhost:8080/solr/select?q=PID:km\:10571"</code></p>
<p>The resulting file will look like <a href="/islandora_workbench_docs/km_10571.xml">this</a>.</p>
<p>In the XML version, the Solr fieldnames are the values of the <code>"name"</code> attribute of each element.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Solr documents for individual objects will not necessarily contain all the fieldnames in your index. In general, empty fields in the source XML (e.g. MODS) are not added to a Solr document. This means that even though inspecting individual Solr documents may not reveal all of the Solr fields you want to include in your Workbench CSV. You should get samples from a number of objects that you think will represent all of the Solr fields you are interested in.</p>
</div>
<h3 id="fetching-a-csv-list-of-all-solr-fieldnames">Fetching a CSV list of all Solr fieldnames</h3>
<p>To get a 1-row CSV file containing <em>all</em> of the fieldnames in your Solr index, issue the following request:</p>
<p><code>curl -o allfields.csv "http://localhost:8080/solr/select?q=*:*&amp;wt=csv&amp;rows=0&amp;fl=*"</code></p>
<p>Unlike the queries for individual Islandora 7 objects' Solr documents, the results of this query will contain all the fields in your index.</p>
<h2 id="configuring-which-solr-fields-to-include-in-the-csv">Configuring which Solr fields to include in the CSV</h2>
<p>As we can see from the examples above, Islandora 7's Solr schema contains a lot of fields, mirroring the richness of MODS (or other XML-based metadata) and the
Fedora 3.x RELS-EXT properties. By default, this script fetches all the fields in the Islandora 7's Solr's index, which will invariably be many, many more fields that you will normally want in the output CSV. You will need to tell the script which fields to exclude and which to include.</p>
<p>The script takes the following approach to providing control over what fields end up in the CSV data it generates:</p>
<ol>
<li>It fetches a list of all fieldnames used in the Solr index.</li>
<li>It then matches each fieldname against the regular expression pattern defined in the script's <code>field_pattern</code>
   variable, and if the match is successful, includes the fieldname in the CSV. For
   example, <code>field_pattern = 'mods_.*(_s|_ms)$'</code> will match every Solr field that starts with "mods_" and ends with
   either "_s" or "_ms".</li>
<li>Next, it matches each remaining fieldname against the regular expression patterns defined in the
   script's <code>field_pattern_do_not_want</code> variable, and if the match is successful, <em>removes</em> the fieldname from the CSV.
   For example, <code>field_pattern_do_not_want = '(marcrelator|isSequenceNumberOf)'</code> will remove all fieldnames that contain
   either the string "marcrelator" or "isSequenceNumberOf". Note that the regular expression used in this configuration
   variable is not a negative pattern; in other words, if a fieldname matches this pattern, it is excluded from the
   field list.</li>
<li>Finally, it adds to the start of the remaining list of fieldnames every Solr fieldname defined in
   the <code>standard_fields</code> configuration variable. This configuration variable provides a mechanism to ensure than any
   fields that are not included in step 2 are present in the generated CSV file.</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You will always want at least the Solr fields "PID", "RELS_EXT_isMemberOfCollection_uri_ms",
"RELS_EXT_hasModel_uri_s", "RELS_EXT_isMemberOfCollection_uri_ms", "RELS_EXT_isConstituentOf_uri_ms",
and "RELS_EXT_isPageOf_uri_ms" in your <code>standard_fields</code> configuration variable since these fields
contain information about objects' relationships to each other.</p>
</div>
<p>Even with a well-configured set of pattern variables, the column headers are ugly, and there are a lot of them. Here is
a sample from a minimal Islandora 7.x:</p>
<pre><code class="language-text">file,PID,RELS_EXT_hasModel_uri_s,RELS_EXT_isMemberOfCollection_uri_ms,RELS_EXT_isConstituentOf_uri_ms,RELS_EXT_isPageOf_uri_ms,mods_recordInfo_recordOrigin_ms,mods_name_personal_author_ms,mods_abstract_s,mods_name_aut_role_roleTerm_code_s,mods_name_personal_author_s,mods_typeOfResource_s,mods_subject_geographic_ms,mods_identifier_local_ms,mods_genre_ms,mods_name_photographer_role_roleTerm_code_s,mods_physicalDescription_form_all_ms,mods_physicalDescription_extent_ms,mods_subject_topic_ms,mods_name_namePart_s,mods_physicalDescription_form_authority_marcform_ms,mods_name_pht_s,mods_identifier_uuid_ms,mods_language_languageTerm_code_s,mods_physicalDescription_form_s,mods_accessCondition_use_and_reproduction_s,mods_name_personal_role_roleTerm_text_s,mods_name__role_roleTerm_code_ms,mods_originInfo_encoding_w3cdtf_keyDate_yes_dateIssued_ms,mods_name_aut_s,mods_originInfo_encoding_iso8601_dateIssued_s,mods_originInfo_dateIssued_ms,mods_name_photographer_namePart_s,mods_name_pht_role_roleTerm_text_ms,mods_identifier_all_ms,mods_name_namePart_ms,mods_subject_geographic_s,mods_originInfo_publisher_ms,mods_subject_descendants_all_ms,mods_titleInfo_title_all_ms,mods_name_photographer_role_roleTerm_text_ms,mods_name_role_roleTerm_text_s,mods_titleInfo_title_ms,mods_name_photographer_s,mods_originInfo_place_placeTerm_text_s,mods_name_role_roleTerm_code_ms,mods_name_pht_role_roleTerm_code_s,mods_name_pht_namePart_s,mods_name_pht_namePart_ms,mods_name_role_roleTerm_code_s,mods_genre_all_ms,mods_physicalDescription_form_authority_marcform_s,mods_name_pht_role_roleTerm_code_ms,mods_extension_display_date_ms,mods_name_photographer_namePart_ms,mods_genre_authority_bgtchm_ms,mods_name_personal_role_roleTerm_text_ms,mods_name_pht_ms,mods_name_photographer_role_roleTerm_text_s,mods_language_languageTerm_code_ms,mods_originInfo_place_placeTerm_text_ms,mods_titleInfo_title_s,mods_identifier_uuid_s,mods_language_languageTerm_code_authority_iso639-2b_s,mods_genre_s,mods_name_aut_role_roleTerm_code_ms,mods_typeOfResource_ms,mods_originInfo_encoding_iso8601_dateIssued_ms,mods_name_personal_author_role_roleTerm_text_ms,mods_abstract_ms,mods_language_languageTerm_text_s,mods_genre_authority_bgtchm_s,mods_language_languageTerm_s,mods_language_languageTerm_ms,mods_subject_topic_s,mods_name_photographer_ms,mods_name_pht_role_roleTerm_text_s,mods_recordInfo_recordOrigin_s,mods_name_aut_ms,mods_originInfo_publisher_s,mods_identifier_local_s,mods_language_languageTerm_text_ms,mods_physicalDescription_extent_s,mods_language_languageTerm_code_authority_iso639-2b_ms,mods_name__role_roleTerm_code_s,mods_originInfo_encoding_w3cdtf_keyDate_yes_dateIssued_s,mods_name_photographer_role_roleTerm_code_ms,mods_name_role_roleTerm_text_ms,mods_name_personal_author_role_roleTerm_text_s,mods_accessCondition_use_and_reproduction_ms,mods_physicalDescription_form_ms,sequence
</code></pre>
<p>The script-generated solr request may not in most cases be useful or even workable. You may need to experiment with the <code>field_pattern</code> and <code>field_pattern_do_not_want</code> configuration settings to reduce the number of Solr fields.</p>
<h2 id="adding-filters-to-your-solr-query-to-limit-the-objects-fetched-from-the-source-islandora">Adding filters to your Solr query to limit the objects fetched from the source Islandora</h2>
<p>The <code>namespace</code>, <code>collection</code>, <code>content_model</code>, and <code>solr_filters</code> options documented above allow you to scope the set of objects exported from the source Islandora 7.x instance. The first three take simple, single values. The last option allows you to add arbitrary filters to the query sent to Solr in the form of key:value pairs, like this:</p>
<pre><code class="language-text">solr_filters:
 - ancestors_ms: 'some\:collection'
 - fgs_state_s: 'Active'
</code></pre>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Colons within PIDs used in filters must be escaped with a backslash (<code>\</code>), e.g., <code>some\:collection</code>.</p>
</div>
<h2 id="putting-your-solr-request-in-a-file">Putting your Solr request in a file</h2>
<p>You have the option of
providing their own solr query in a text file and  pointing to the file using the <code>--metadata_solr_request</code> option when running the script:</p>
<p><code>python3 get_islandora_7_content.py --config &lt;my_config&gt; --metadata_solr_request &lt;my_request.txt&gt;</code></p>
<p>The contents of the file must contain a full HTTP request to Solr, e.g.:</p>
<pre><code class="language-text">http://localhost:8080/solr/select?q=PID:*&amp;wt=csv&amp;rows=1000000&amp;fl=PID,RELS_EXT_hasModel_uri_s,RELS_EXT_isMemberOfCollection_uri_ms,RELS_EXT_isMemberOf_uri_ms,mods_originInfo_encoding_iso8601_dateIssued_mdt
</code></pre>
<p>The advantage of putting your Solr request in its own file is that you have complete control over the Solr query. Requests to Solr in this file should always include the "wt=csv" and "rows=1000000" parameters (the "rows" parameter should have a value that is greater than the number of objects in your repository, otherwise Solr won't return all objects).</p>
<h2 id="using-the-csv-as-input-for-workbench">Using the CSV as input for Workbench</h2>
<p>The CSV file generated by this script will almost certainly contain many more columns than you will want to ingest into
Islandora 2. You will probably want to delete columns you don't need, combine the contents of several columns into one,
and edit the contents of others.</p>
<p>As we can see from the example above, the column headings in the CSV are Solr fieldnames (<code>RELS_EXT_hasModel_uri_s</code>
, <code>mods_titleInfo_title_ms</code>, etc.). You will need to replace those column headers with the equivalent
fields <a href="/islandora_workbench_docs/fields/#content-type-specific-fields">as defined in your Drupal 9 content type</a>. In addition, the metadata stored
in Islandora 7's Solr index does not in many cases have the structure Workbench requires, so the data in the CSV file
will need to be edited before it can be used by Workbench to create nodes. The content of Islandora 7 Solr fields is
derived from MODS (or other) XML elements, and, with the exception of text-type fields, will not necessarily map cleanly
to Drupal fields' data types. In other words, to use the CSV data generated by <code>get_islandora_7_content.py</code>, you will
need to do some work to prepare it (or "transform" it, to use ETL language) to use it as input for Workbench.</p>
<p>However, the script adds three columns to the CSV file that do not use Solr fieldnames and whose contents you should
<em>not</em> edit but that you may need to rename: <code>file</code>, <code>PID</code>, and <code>sequence</code>:</p>
<pre><code class="language-text">Do not edit name                                        Rename 'sequence' column (e.g.,
or contents of                                          to 'field_weight') but do not
'file' column.                                          edit its contents.
 |                                / Every other column           |
 |    / Rename 'PID' to the       | will need to be              |
 |    | value of your 'id_field'  | deleted, renamed,            |
 |    | setting but do not edit   | or its content               |
 |    | column contents.          | edited.                      |
 v    v                           v                              v
---------------------------------------------------------------------
file,PID,RELS_EXT_hasModel_uri_s,[...],mods_typeOfResource_s,sequence
</code></pre>
<p>First, the required Workbench column "file" is added to the beginning of each CSV row, and is populated with the
filename of the OBJ datastream. This filename is based on the object's PID, with the the <code>:</code> replaced with an
underscore, and has an extension determined by the OBJ datastream's MIME type.</p>
<p>Second, "PID" is the Islandora 7.x PID of each object in the CSV file. This column header can be changed to "id" or
whatever you have defined in your Workbench configuration file's <code>id_field</code> setting. Alternatively, you can set the
value of <code>id_field</code> to <code>PID</code> and not rename that CSV column.</p>
<p>Third, a "sequence" column is added at the end of each CSV row. This is where the <code>get_islandora_7_content.py</code> script
stores the sequence number of each child object/page in relation to its parent . If an Islandora 7.x object has a
property in its RELS-EXT datastream <code>islandora:sSequenceNumberOfxxx</code> (where "xxx" is the object's parent), the value of
that property is added to the "sequence" column at the end of each row in the CSV. For paged content, this value is
taken from the <code>islandora:isSequenceNumber</code> RELS-EXT property. These values are ready for use in the "field_weight"
Drupal field created by the Islandora Defaults module; you can simply rename the "sequence" column header to "
field_weight" when you use the CSV as input for Islandora Workbench. Note that you don't need to configure the script to
include fields that contain "isSequenceNumberOf" or "isSequenceNumber" in your CSV; in fact, because there are so many
of them in a typical Islandora 7 Solr index, you will want to <em>exclude</em> them using the <code>field_pattern_do_not_want</code>
configuration variable. Excluding them is safe, since the script fetches the sequence information separately from the
other CSV data.</p>
<p>A fourth column in your Workbench CSV, <code>field_member_of</code>, is not added automatically. It contains the PID of the parent object, whether it is a collection, the top level object (parent) in a compound object, book object that has pages, etc. If an Islandora object has a value that should be in the <code>field_member_of</code> column, it will be in one or more (usually just one) of the folowing columns in the CSV created by the <code>get_islandora_7_content.py</code> script:</p>
<ul>
<li><code>RELS_EXT_isMemberOfCollection</code></li>
<li><code>RELS_EXT_isPageOf</code></li>
<li><code>RELS_EXT_isSequenceNumberOfXXX</code> (where XXX is the PID of the parent object)</li>
<li><code>RELS_EXT_isConstituentOf</code></li>
</ul>
<p>All of these columns will likely be present in your CSV, but it is possible that some may not be, for example if your Islandora 7 repository did not have a module enabled that uses one of those RELS-EXT properties.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In general, the CSV that you need to end up with to ingest content into Islandora 2 using Workbench needs to have a structure similar to that described in the "<a href="https://mjordan.github.io/islandora_workbench_docs/paged_and_compound/#with-pagechild-level-metadata">With page/child-level metadata</a>" section of the Workbench documentation for "Creating paged, compound, and collection content." You should review the points in the "Some important things to note" section of that documentation.</p>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../generating_csv_files/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Generating CSV files" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Generating CSV files
            </div>
          </div>
        </a>
      
      
        
        <a href="../hooks/" class="md-footer__link md-footer__link--next" aria-label="Next: Hooks" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Hooks
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>